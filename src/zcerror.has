m_syntax_error:				m_err	SYNTAX_ERROR
m_illegal_track_size:			m_err	ILLEGAL_TRACK_SIZE
m_illegal_reservation:			m_err	ILLEGAL_RESERVATION
m_illegal_command_line:			m_err	ILLEGAL_COMMAND_LINE
m_illegal_channel:			m_err	ILLEGAL_CHANNEL
m_assign_command_error:			m_err	ASSIGN_COMMAND_ERROR
m_illegal_track_number:			m_err	ILLEGAL_TRACK_NUMBER
m_illegal_frequency_value:		m_err	ILLEGAL_FREQUENCY_VALUE
m_cut_off_level_too_big:		m_err	CUT_OFF_LEVEL_TOO_BIG
*m_illegal_track_stat:			m_err	ILLEGAL_TRACK_STAT
*m_illegal_track_mode:			m_err	ILLEGAL_TRACK_MODE
m_reassignment_error:			m_err	REASSIGNMENT_ERROR
m_too_many_tracks:			m_err	TOO_MANY_TRACKS
m_string_break_off:			m_err	STRING_BREAK_OFF
m_tempo_command_error:			m_err	TEMPO_COMMAND_ERROR
m_track_command_error:			m_err	TRACK_COMMAND_ERROR
m_illegal_timbre_parameter:		m_err	ILLEGAL_TIMBRE_PARAMETER
m_parameter_shortage:			m_err	PARAMETER_SHORTAGE
m_string_too_long:			m_err	STRING_TOO_LONG
m_parameter_break_off:			m_err	PARAMETER_BREAK_OFF
m_illegal_operand:			m_err	ILLEGAL_OPERAND
m_illegal_nesting_error:		m_err	ILLEGAL_NESTING_ERROR
m_undefined_ppc:			m_err	UNDEFINED_PPC
m_illegal_pitch_value:			m_err	ILLEGAL_PITCH_VALUE
m_illegal_parameters_combination:	m_err	ILLEGAL_PARAMETERS_COMBINATION
m_missing_operand:			m_err	MISSING_OPERAND
m_illegal_volume_value:			m_err	ILLEGAL_VOLUME_VALUE
m_undefined_loop_type:			m_err	UNDEFINED_LOOP_TYPE
m_illegal_bank_number:			m_err	ILLEGAL_BANK_NUMBER
m_illegal_note_number:			m_err	ILLEGAL_NOTE_NUMBER
m_illegal_octave:			m_err	ILLEGAL_OCTAVE
m_illegal_tone_number:			m_err	ILLEGAL_TONE_NUMBER
m_illegal_timbre_number:		m_err	ILLEGAL_TONE_NUMBER
m_unexpected_operand:			m_err	UNEXPECTED_OPERAND
m_command_line_break_off:		m_err	COMMAND_LINE_BREAK_OFF
m_inappropriate_command:		m_err	INAPPROPRIATE_COMMAND
m_illegal_filename:			m_err	ILLEGAL_FILENAME
m_illegal_version_number:		m_err	ILLEGAL_VERSION_NUMBER
m_undefined_track_referred:		m_err	UNDEFINED_TRACK_REFERRED
m_illegal_device_id:			m_err	ILLEGAL_DEVICE_ID
m_illegal_model_id:			m_err	ILLEGAL_MODEL_ID
m_illegal_interface_number:		m_err	ILLEGAL_INTERFACE_NUMBER
m_parameter_cannot_be_omitted:		m_err	PARAMETER_CANNOT_BE_OMITTED
m_kanji_break_off:			m_err	KANJI_BREAK_OFF
m_illegal_panpot_value:			m_err	ILLEGAL_PANPOT_VALUE
m_illegal_register_number:		m_err	ILLEGAL_REGISTER_NUMBER
m_illegal_parameter_value:		m_err	ILLEGAL_PARAMETER_VALUE
m_illegal_mode_value:			m_err	ILLEGAL_MODE_VALUE
m_undefined_mode:			m_err	UNDEFINED_MODE
m_group_notes_command_error:		m_err	GROUP_NOTES_COMMAND_ERROR
m_illegal_track_volume:			m_err	ILLEGAL_TRACK_VOLUME
m_illegal_track_frequency:		m_err	ILLEGAL_TRACK_FREQUENCY
m_illegal_command_order:		m_err	ILLEGAL_COMMAND_ORDER
m_illegal_speed_value:			m_err	ILLEGAL_SPEED_VALUE
m_device_id_redesignation:		m_err	DEVICE_ID_REDESIGNATION
m_illegal_fader_level:			m_err	ILLEGAL_FADER_LEVEL
m_track_number_redesignation:		m_err	TRACK_NUMBER_REDESIGNATION
m_illegal_master_clock:			m_err	ILLEGAL_MASTER_CLOCK
m_illegal_meter:			m_err	ILLEGAL_METER
m_timbre_parameter_shortage:		m_err	TIMBRE_PARAMETER_SHORTAGE
m_illegal_gate_range:			m_err	ILLEGAL_GATE_RANGE
m_missing_filename:			m_err	MISSING_FILENAME
m_file_not_found:			m_err	FILE_NOT_FOUND
m_too_many_signs:			m_err	TOO_MANY_SIGNS
m_too_many_include_files:		m_err	TOO_MANY_INCLUDE_FILES
m_recusive_include_error:		m_err	RECUSIVE_INCLUDE_ERROR
m_illegal_sign:				m_err	ILLEGAL_SIGN
m_unknown_key_declared:			m_err	UNKNOWN_KEY_DECLARED
*m_macro_name_redefinition:		m_err	MACRO_NAME_REDEFINITION
m_macro_name_too_long:			m_err	MACRO_NAME_TOO_LONG
m_macro_name_cannot_be_omitted		m_err	MACRO_NAME_CANNOT_BE_OMITTED
m_pattern_name_redefinition:		m_err	PATTERN_NAME_REDEFINITION
m_pattern_name_too_long:		m_err	PATTERN_NAME_TOO_LONG
m_pattern_name_cannot_be_omitted	m_err	PATTERN_NAME_CANNOT_BE_OMITTED
m_illegal_character:			m_err	ILLEGAL_CHARACTER
m_null_pattern_error:			m_err	NULL_PATTERN_ERROR
m_illegal_wave_number			m_err	ILLEGAL_WAVE_NUMBER
m_illegal_switch_value:			m_err	ILLEGAL_SWITCH_VALUE
m_illegal_depth_value:			m_err	ILLEGAL_DEPTH_VALUE
m_unknown_register_name:		m_err	UNKNOWN_REGISTER_NAME
m_illegal_control_number:		m_err	ILLEGAL_CONTROL_NUMBER
m_illegal_repeat_time:			m_err	ILLEGAL_REPEAT_TIME
m_empty_brace_error:			m_err	EMPTY_BRACE_ERROR
m_too_many_notes:			m_err	TOO_MANY_NOTES
m_illegal_note_length:			m_err	ILLEGAL_NOTE_LENGTH
m_disorderly_repeat_structure:		m_err	DISORDERLY_REPEAT_STRUCTURE
m_undefined_pattern:			m_err	UNDEFINED_PATTERN
m_delay_too_long:			m_err	DELAY_TOO_LONG
m_illegal_delay:			m_err	ILLEGAL_DELAY
m_illegal_category_event:		m_err	ILLEGAL_CATEGORY_EVENT
m_unknown_event_class:			m_err	UNKNOWN_EVENT_CLASS
m_illegal_command_in_brace:		m_err	ILLEGAL_COMMAND_IN_BRACE
m_illegal_command_in_pattern:		m_err	ILLEGAL_COMMAND_IN_PATTERN
m_illegal_gate_time:			m_err	ILLEGAL_GATE_TIME
m_key_transpose_out_of_range:		m_err	KEY_TRANSPOSE_OUT_OF_RANGE
m_illegal_maker_id:			m_err	ILLEGAL_MAKER_ID
m_illegal_velocity_value:		m_err	ILLEGAL_VELOCITY_VALUE
m_illegal_aftertouch_value:		m_err	ILLEGAL_AFTERTOUCH_VALUE
m_hold_time_too_long:			m_err	HOLD_TIME_TOO_LONG
m_portament_time_too_long:		m_err	PORTAMENT_TIME_TOO_LONG
m_bend_time_too_long:			m_err	BEND_TIME_TOO_LONG
m_illegal_effect_parameter:		m_err	ILLEGAL_EFFECT_PARAMETER
m_illegal_tempo_value:			m_err	ILLEGAL_TEMPO_VALUE
m_too_many_parameters:			m_err	TOO_MANY_PARAMETERS
m_portament_command_error:		m_err	PORTAMENT_COMMAND_ERROR
m_chord_command_error:			m_err	CHORD_COMMAND_ERROR
m_illegal_tie_mode:			m_err	ILLEGAL_TIE_MODE
m_speed_too_slow:			m_err	SPEED_TOO_SLOW
m_illegal_arcc_control:			m_err	ILLEGAL_ARCC_CONTROL
m_undefined_phase_type:			m_err	UNDEFINED_PHASE_TYPE
m_illegal_reset_value:			m_err	ILLEGAL_RESET_VALUE
m_illegal_wave_origin:			m_err	ILLEGAL_WAVE_ORIGIN
m_illegal_fader_speed:			m_err	ILLEGAL_FADER_SPEED
m_illegal_noise_parameter:		m_err	ILLEGAL_NOISE_PARAMETER
m_illegal_bend_range:			m_err	ILLEGAL_BEND_RANGE
m_undefined_zmd_code:			m_err	UNDEFINED_ZMD_CODE
m_error_in_division:			m_err	ERROR_IN_DIVISION
m_illegal_loop_start_point:		m_err	ILLEGAL_LOOP_START_POINT
m_illegal_loop_end_point:		m_err	ILLEGAL_LOOP_END_POINT
m_illegal_wave_value:			m_err	ILLEGAL_WAVE_VALUE
m_illegal_map_number:			m_err	ILLEGAL_MAP_NUMBER
m_illegal_partial_number:		m_err	ILLEGAL_PARTIAL_NUMBER
m_illegal_patch_number:			m_err	ILLEGAL_PATCH_NUMBER
m_illegal_part_number:			m_err	ILLEGAL_PART_NUMBER
m_illegal_parameter_format:		m_err	ILLEGAL_PARAMETER_FORMAT
m_pattern_not_available:		m_err	PATTERN_NOT_AVAILABLE
m_illegal_time_value:			m_err	ILLEGAL_TIME_VALUE
m_timbre_name_too_long:			m_err	TIMBRE_NAME_TOO_LONG
m_illegal_damper_value:			m_err	ILLEGAL_DAMPER_VALUE

m_surplus_in_division:			m_warn	SURPLUS_IN_DIVISION
m_zmd_directly_embedded:		m_warn	ZMD_DIRECTLY_EMBEDDED
m_illegal_frequency_number:		m_warn	ILLEGAL_FREQUENCY_NUMBER
m_sync_and_jump_control_are_used_at_the_same_time:	m_warn	SYNC_AND_JUMP_CONTROL_ARE_USED_AT_THE_SAME_TIME

							*Warning表示無しでは(bra mwce_exit)
m_warn_code_exit:					*その値がウォーニングコード
*	movem.l	d0-d7/a0-a5,-(sp)			*m_warnマクロですでに退避済み
	tas.b	warn_flg-work(a6)
	bmi	mwce_exit
	bsr	set_err_code_for_compile
	bmi	mwce_exit
	addq.l	#1,n_of_warn-work(a6)			*ウォーニングカウントを増やす
mwce_exit:
	movem.l	(sp)+,d0-d7/a0-a5
	rts

m_error_code_exit:		*その値がエラーコード
	bsr	set_err_code_for_compile
	addq.l	#1,n_of_err-work(a6)	*inc error count
	move.l	sp_buf(pc),sp	*スタック補正
				*エラーの発生した行を飛ばして
	cmp.l	a4,d4		*次の行のコンパイルに望む
	bls	go_compile_end	*終了
	move.w	compile_option+2(pc),d0
	andi.l	#$7f,d0		*コンパイル打ち切りエラー個数取りだし
	beq	doscanedcdlp	*無限個ケース
	cmp.l	n_of_err(pc),d0
	bls	go_compile_end	*エラーが指定個数を越えたので終了
doscanedcdlp:			*コンパイル作業の復活
	bsr	skip_spc2
	cmp.l	a4,d4		*次の行のコンパイルに望む
	bls	go_compile_end	*終了
	move.b	(a4)+,d0
	bsr	chk_kanji
	bpl	@f
	cmp.l	a4,d4
	bls	go_compile_end
	addq.w	#1,a4
	bra	doscanedcdlp
@@:
	cmpi.b	#'/',d0
	bne	@f
	bsr	do_skip_comment
	bra	doscanedcdlp
@@:
	cmp.b	#$0a,d0
	beq	1f
	cmpi.b	#$1a,d0
	bne	doscanedcdlp
	bra	go_compile_end	*これにて終了
1:
	subq.w	#1,a4
	btst.b	#1,now_cmd-work(a6)	*MMLコンパイル?
	beq	cmpl_lp
	bclr.b	#c_renp1,tpt_mode_flg(a5)
	bra	mml_lp

m_out_of_memory:					*コンパイル時
	move.l	sp_buf(pc),sp
	tst.b	compile_phase-work(a6)
	bne	t_out_of_memory_compile
	move.l	#ZM_COMPILER*65536+OUT_OF_MEMORY,d0
	bsr	set_err_code_for_compile		*メモリ不足の場合は即座に
	addq.l	#1,n_of_err-work(a6)	*inc error count
	bra	go_compile_end				*コンパイル処理を打ち切る

t_out_of_memory_compile:				*コンパイル終了後のメモリ不足発生
	move.l	#ZM_COMPILER*65536+OUT_OF_MEMORY,d0
	bsr	set_err_code
	moveq.l	#0,d0
	bsr	set_err_code				*dummy
	bsr	set_err_code				*dummy
	bsr	set_err_code				*dummy
	addq.l	#1,n_of_err-work(a6)	*inc error count
	bra	compile_err_end
*-----------------------------------------------------------------------------
go_compile_end:
	btst.b	#1,now_cmd-work(a6)	*MMLコンパイル?
	beq	compile_end		*cmpl_lpケース
	lea	mml_lp_sp_depth*4(sp),sp
	bclr.b	#c_renp1,tpt_mode_flg(a5)
	bra	compile_end		*mml_lpケース
